<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ᓚᘏᗢ Tom4te</title>
</head>

<style type="text/css">
	/*
		PALETTE
		--vivid-sky-blue: #0ad2ffff
		--eerie-black: #131313ff
		--slimy-green: #00ff00
		--ruby-red: #9b1d20ff
		--tea-green: #d0ffceff
	*/

		/*height: 100vh;*/

	body {
		margin: 0px;
		/* font-family: Arial, Helvetica, sans-serif; */
		font-family: 'Courier New', monospace;
	}

	.content {
		/*min-width: 100%;*/
		/*min-height: 100%;*/
		background-color: #0ad2ffff;
	}

	.navghost {
		height: 10vh;
	}

	.navbar {
		overflow: hidden;
		background-color: #131313ff ;
		position: fixed;
		top: 0px;
		width: 100%;
		height: 10vh;
		z-index: 100;
	}

	.navbar .item {
		float: right;
		color: #00ff00;
		display: grid;
		padding-top: 3vh;
		padding-bottom: 3vh;
		padding-left: 1vw;
		padding-right: 1vw;
		align-content: center;
		justify-content: center;
		text-align: center;
		text-decoration: none;
		font-size: 1.2em;
		font-weight: bold;
		height: 4vh;
	}

	.navbar .item:hover {
		cursor: pointer;
		color: #131313ff;
		background-color: #00ff00;
	}

	.character {
		height: 90vh;
		width: 100%;
	}

	.char-viewer {
		position: relative;
		height: 90vh;
		width: 100%;
		margin-top: -90vh;
		/*background-color: darkblue;*/
	}

	.char-three {
		position: absolute;
		width: 100%;
		height: 100%;
	}

	.char-viewer canvas {
		width: 100%;
		height: 100%;
	}

	.label-character {
		position: relative;
		height: 90vh;
		width: 100%;
		z-index: 1;
	}

	.label-character-text {
		height: 30vh;
		width: 100%;
		position: absolute;
		padding-top: 30vh;
		padding-bottom: 30vh;
	}

	.label-character h2 {
		margin-block-start: 0em;
		margin-block-end: 0em;
		color: white;
		font-size: 2em;
		font-weight: bold;
		margin-top: 0em;
		margin-bottom: 0em;
		margin-left: 0px;
		margin-right: 0px;
		padding-left: 2vw;
	}

	.label-character h3 {
		margin-block-start: 0em;
		margin-block-end: 0em;
		color: white;
		font-size: 1.5em;
		padding-left: 2vw;
	}

	.section-info {
		white-space: pre;
		height: 65vh;
		width: 100%;
	}

	.sobre {
		display: flex;
		color: #00ff00;
		/*height: 80vh;*/
		background-color: #131313ff;
	}

	.avatar-space {
		padding-left: 3vw;
		padding-right: 3vw;
	    align-items: center;
	    display: flex;
	    justify-content: center;
	}

	.avatar {
		border-width: 10px;
		border-style: solid;
		border-color: white;
		vertical-align: middle;
		width: 200px;
		height: 200px;
		border-radius: 50%;
	}

	.sobre .text-space {
	}

	.sobre .text-space h3 {
		text-align: center;
	}

	.habilidades {
		background-color: #131313ff;
	}

	.trabalhos {
		background-color: #131313ff;
	}

	.footer {
		background-color: #131313ff;
		height: 40vh;
		width: 100%;
	}

</style>

<body>
	<div class="content">

		<div class="navbar">
			<div class="item">
				<a id="trabalhos">Trabalhos</a>
			</div>
			<div class="item">
				<a id="habilidades">Habilidades</a>
			</div>
			<div class="item">
				<a id="sobre">Sobre</a>
			</div>
			<div class="item">
				<a id="inicio">inicio</a>
			</div>
		</div>

		<div class="navghost">
			<!-- boooo! -->
		</div>

		<section class="character">
			<div class="label-character">
				<div class="label-character-text">
					<h2>Estamos trabalhando....</h2>
					<h3>Logo este template estará pronto</h3>
				</div>
			</div>
			<!-- <canvas class="char-viewer" id="threejs-char-viewer"/> -->
			<div class="char-viewer" id="threejs-char-viewer">
				<div class="char-three">
					
				</div>
			</div>
		</section>
		<section class="section-info sobre">
			<div class="avatar-space">
				<img src="./img/me.jpg" alt="Lucas Da Silva Rodrigues Avatar" class="avatar">
			</div>
			<div class="text-space">
				<h3><strong>Quem é Lucas da Silva Rodrigues?</strong></h3>
				<p>Desde Criança sou apaixonado por invenções, tecnologias e computadores, mas foi na adolescência que descobri como expressar essa paixão através da programação.</p>
			</div>
		</section>
		<section class="section-info habilidades">
			
		</section>
		<section class="section-info trabalhos">
			
		</section>
		<div class="footer">
			
		</div>
	</div>
	<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

	<script type="importmap">
	  {
	    "imports": {
	      "three": "./three.module.js",
	      "three/addons/": "./utils/jsm/"
	    }
	  }
	</script>

	<script type="module">
		import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
	    import * as THREE from 'three';

		const clock = new THREE.Clock();
		const charElement = document.querySelector(".char-three");
		var width = charElement.offsetWidth;
		var height = charElement.offsetHeight;
		const scene = new THREE.Scene();
		scene.background = new THREE.Color( 0x0AD2FF );
		scene.fog = new THREE.Fog( 0xa0a0a0, 10, 50 );
		const camera = new THREE.PerspectiveCamera( 75, width / height, 0.1, 1000 );
		// camera.position.set( -1.5, 1.2, 2 );
		// camera.lookAt( -1.5, 1, -1 );

		const renderer = new THREE.WebGLRenderer();
		renderer.setSize( width, height );
		renderer.shadowMap.enabled = true
		renderer.shadowMap.type = THREE.PCFSoftShadowMap
		charElement.appendChild( renderer.domElement );	
		const light = new THREE.AmbientLight( 0xFFFFFF ); // havy white light
		// const light = new THREE.AmbientLight( 0xD0E0E3 ); // soft white light
		scene.add( light );

		const uniforms = {
			u_mouse: { value: { x: width / 2, y: height / 2 } },
			u_resolution: { value: { x: window.innerWidth, y: window.innerHeight } },
			// u_resolution: { value: { x: width, y: height } },
			u_time: { value: 0.0 }
		}
		const backgroundMaterial = new THREE.ShaderMaterial({
			vertexShader: document.getElementById( 'vertex-shader' ).textContent,
			fragmentShader: document.getElementById( 'fragment-shader' ).textContent,
			uniforms
		});
		const planeGeometry = new THREE.PlaneBufferGeometry(100,100,1,1)
		const plane = new THREE.Mesh(planeGeometry, backgroundMaterial)
		plane.position.z = -10;
		scene.add(plane)

		console.log("camera",camera);

		var mixer = null;
        var lastSecod = null;

        function cameraRotate(t) {
        	camera.position.set( -1.5, 1.2, 2 );
        	camera.lookAt( -1.5, 1, -1 );
        }

		function animate(t) {

			if(!lastSecod) { lastSecod = t};

			if (mixer && t) {
			    let timeInSecods = (t - lastSecod) * 0.001;
				mixer.update( timeInSecods );

				uniforms.u_time.value += timeInSecods;
			}
			

			lastSecod = t;

			cameraRotate();

			requestAnimationFrame( animate );
			renderer.render( scene, camera );
		}

		animate();

		const loader = new GLTFLoader().setPath( './models' );
		loader.load( '/run.glb', function ( glb ) {
			const mesh = glb.scene;
			// console.log("mesh",mesh);

			mesh.position.set(0,0, 0);
			// mesh.rotation.set(0,Math.PI - (Math.PI / 10), 0);
			mesh.rotation.set(0,0, 0);

			// Create an AnimationMixer, and get the list of AnimationClip instances
			mixer = new THREE.AnimationMixer( mesh );
			const clips = glb.animations;

			// Play a specific animation
			const action = mixer.clipAction( glb.animations[0] );
			action.play()
			scene.add( mesh );
		} );
		
	</script>

	<!-- shader for background -->
	<script id="fragment-shader" type="x-shader/x-fragment">
		// Matrix Visual Effect
		#ifdef GL_ES
			precision mediump float;
		#endif

		uniform vec2 u_resolution;
		uniform vec2 u_mouse;
		uniform float u_time;


		float random(in float x){
			return fract(sin(x)*43758.5453);
		}

		float random(in vec2 st){
			return fract(sin(dot(st.xy ,vec2(12.9898,78.233))) * 43758.5453);
		}

		float rchar(in vec2 outer,in vec2 inner){
			float grid = 5.;
			vec2 margin = vec2(.2,.05);
			float seed = 23.;
			vec2 borders = step(margin,inner)*step(margin,1.-inner);
			return step(.5,random(outer*seed+floor(inner*grid))) * borders.x * borders.y;
		}

		vec3 matrix(in vec2 st){
			float rows = 80.0;
			vec2 ipos = floor(st*rows);

			ipos += vec2(.0,floor(u_time*20.*random(ipos.x)));

			vec2 fpos = fract(st*rows);
			vec2 center = (.5-fpos);

			float pct = random(ipos);
			float glow = (1.-dot(center,center)*3.)*1.5;

			return vec3(0,rchar(ipos,fpos) * pct * glow,0);
		}

		void main(){
			vec2 st = gl_FragCoord.st/u_resolution.xy;
			st.y *= u_resolution.y/u_resolution.x;
			vec3 color = matrix(st);
			gl_FragColor = vec4(color , 1);
		}
	</script>

	<script id="vertex-shader" type="x-shader/x-vertext">
		varying vec2 v_uv;
	
		void main() {
			v_uv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}
	</script>

	
</body>
</html>